package com.example.demo.Controllers;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@RequestMapping("/appActivitats/actividades")
public class ActividadController {

    @Autowired
    private ActividadService actividadService;

    // Crear una nueva actividad
    @PostMapping
    public ResponseEntity<Actividad> crearActividad(@RequestBody Actividad actividad) {
        Actividad nuevaActividad = actividadService.crearActividad(actividad);
        return ResponseEntity.ok(nuevaActividad);
    }

    // Consultar actividades
    @GetMapping
    public ResponseEntity<List<Actividad>> obtenerActividades() {
        List<Actividad> actividades = actividadService.obtenerActividades();
        return ResponseEntity.ok(actividades);
    }

    // Inscribirse en una actividad
    @PostMapping("/{actividadId}/inscribir/{usuarioId}")
    public ResponseEntity<Void> inscribirUsuario(@PathVariable Long actividadId, @PathVariable Long usuarioId) {
        actividadService.inscribirUsuario(actividadId, usuarioId);
        return ResponseEntity.ok().build();
    }

    // Consultar información de una actividad específica
    @GetMapping("/{id}")
    public ResponseEntity<Actividad> obtenerActividad(@PathVariable Long id) {
        Actividad actividad = actividadService.obtenerActividad(id);
        return ResponseEntity.ok(actividad);
    }

    // Exportar actividades en formato JSON
    @GetMapping("/exportar")
    public ResponseEntity<List<Actividad>> exportarActividades() {
        List<Actividad> actividades = actividadService.obtenerActividades();
        return ResponseEntity.ok(actividades);
    }

    // Importar actividades desde un archivo JSON
    @PostMapping("/importar")
    public ResponseEntity<Void> importarActividades(@RequestBody List<Actividad> actividades) {
        actividadService.importarActividades(actividades);
        return ResponseEntity.noContent().build();
    }
}

